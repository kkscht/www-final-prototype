<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- let's import our stylesheet (found in public/css/styles.css)-->
  
    <!-- Bootstrap -->

     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
     integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
 
    <!-- Our style sheet -->
    <link rel="stylesheet" type="text/css" href="/css/styles.css" />

    <!-- Google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cabin:ital,wght@0,400..700;1,400..700&family=Inter:wght@100..900"
    rel="stylesheet">

   <style>
     h1 {
      font-family: "Cabin";
      text-align: center;
      /* color: #E91E63;
      -webkit-text-stroke-width: 1px;
      -webkit-text-stroke-color: black; */
     }
     .menu button {
        /* background: #FBD0DE; */
        /* border: 2px solid black; */
        /* border-radius: 20px;
        padding: 5px 10px;
        margin: 3px;
        font-size: 10px;
        color: black;
        cursor: pointer;
        outline: none; */
        margin-bottom: 10px; 
        background-color: #531A2E;
      }
      
      .menu-bar button:hover {
        background: #E91E63;
        color: #f0f0f0;
      }
     
      #id:hover {
        background: #E91E63;
        color: #f0f0f0;
      }
    </style>
  </head>

  <!-- <body style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif" > -->
  <body>
    <header
      style="padding: 10px; text-align: center"
    >
    <h1 style="text-align: center; font-size: 30px;">Edit Profile</h1>
      <!-- <div class="navbar">
        <h1>Edit Profile</h1>
        <a href="/dashboard" class="back-button">&larr; Back</a>
      </div> -->
    </header>
    <!-- <div id="trips-header" class="menu-bar">
      <p style="display: flex;"> </p>     
      <a class="btn btn-secondary menu-bar" style="padding: 5px; align-content: flex-end;" href="/dashboard" role="button">Back</a>
    </div> -->
 
   

      

   
      <div class="content-container">
  
        
        <div
        role="button"
        tabindex="0"
        data-bs-toggle="modal"
        data-bs-target="#profilePicModal"
      >
        <img class="profile-pic" src="/images/default_avatar.png" />
      </div>
   
   
        <!-- This is where the popup modal lives. It won't render until the profile pic is clicked. -->
        <div
        class="modal fade"
        id="profilePicModal"
        tabindex="-1"
        aria-labelledby="profilePicModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <label for="profile-pic-file" class="form-label">
                Choose a new profile picture:
              </label>


              <!-- Add a file uploader component here! -->
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </div>


<div class="edit-info">
  <form id="profile-form"> 
    <div class="profile-form">
  
    <div class="custom-scroll">

      <label for="photos">Photos 
       
        <img class="edit" role="button"
        tabindex="0"
        data-bs-toggle="modal"
        data-bs-target="#uploadPhotos" src="/images/edit.png" />
   
      </label>
              
  
    
 
 
 
      <!-- This is where the popup modal lives. It won't render until the profile pic is clicked. -->
      <div
      class="modal fade"
      id="uploadPhotos"
      tabindex="-1"
      aria-labelledby="uploadPhotosLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <label for="profile-photos" >
              Choose new photos:
            </label>
            <input type="file" id="files" name="files" multiple>



            <!-- Add a file uploader component here! -->
          </div>
          <div class="modal-footer">
            <input type="submit">
          </div>

        </div>
      </div>
      
    </div>

    <div class="gallery">
      <div class="gallery-item">
        <img alt="gallery-post" src="/images/bunny.jpg" />
        <span class="media-icon"></span>
      </div>
      <div class="gallery-item">
        <img alt="gallery-post" src="/images/bunny.jpg" />
        <span class="media-icon"></span>
      </div>

    </div>


    <div class="form-group">
      <label for="first-name">First Name</label>
      <input type="text" id="first-name" name="first_name" placeholder="FirstName">
    </div>
    <div class="form-group">
      <label for="last-name">Last Name</label>
      <input type="text" id="last-name" name="last_name" placeholder="LastName">
    </div>
    <div class="form-group">
      <label for="phone-number">Phone Number</label>
      <input type="tel" id="phone-number" name="phone_number" placeholder="+ 123 456 7890">
    </div>
    <div class="form-group">
      <label for="travel-information">Travel Information</label>
      <textarea id="travel-information" name="travel-information" placeholder="Your travel information..."></textarea>
    </div>
    <div class="form-group">
    <div class="form-group">
      <label for="bio">Bio</label>
      <textarea id="bio" name="bio" placeholder="Your bio..."></textarea>
    </div>
    <label for="interests">Languages <a href="languages.html"><img class="edit" src="/images/edit.png"></a></label>
    <section class="languages">
      <div class="tags">
          <span>Lorem</span>
      </div>
      </section>

    <label for="interests">Interests <a href="interests.html"><img class="edit" src="/images/edit.png"></a></label>
    <section class="interests">
      <div class="tags">
          <span>Lorem</span>
      </div>
      </section>

      <label for="travel-style">Travel Style <a href="travel-style.html"><img class="edit" src="/images/edit.png"></a></label>
      <section class="travel-style">
        <div class="tags">
            <span>Lorem</span>
        </div>
        </section>


  </div>
  </div>
</div>
</div>
</div>
<div id="trips-header" class="menu-bar" style="justify-content: space-around;">
  <a class="btn btn-secondary menu-bar" style="padding: 5px; justify-content: center;flex:0.5; margin-right: 10px; margin-left:10px" href="/dashboard" role="button">Cancel</a>
  <button id="submit" type="submit" class="btn button" style="background-color: #531A2e; color: #f0f0f0;flex:1; margin-right: 10px;">Update</button>
</div>
  <!-- <button id="submit" type="submit" class="update-button">Update</button> -->
  </form>


   
      <script>
        // You can use this function to close the Bootstrap modal.
        const closeModal = () => {
          const modal = document.getElementById("profilePicModal");
          const modalInstance = bootstrap.Modal.getInstance(modal);
          modalInstance.hide();
        };
  
        // This function takes a data URL and resizes it down so it can be stored in localStorage.
        // Loading the image isn't instant, so the function returns a *Promise*.
        // You can use .then() to specify code that should run after the image is resized:
        // resizeAndCropPic(dataUrl).then((croppedDataUrl) => {
        //   // do something with croppedDataUrl
        // });
        // (or use async/await!)
        const resizeAndCropPic = (dataUrl) => {
          // crop to the center and resize to 512x512
          return new Promise((resolve) => {
            const canvas = document.createElement("canvas");
            [canvas.width, canvas.height] = [512, 512];
            const ctx = canvas.getContext("2d");
  
            const img = new Image();
            img.src = dataUrl;
            img.onload = () => {
              const [width, height] = [img.width, img.height];
              const [shorter, longer] =
                width < height ? [width, height] : [height, width];
              const [x, y] =
                width < height
                  ? [0, (height - width) / 2]
                  : [(width - height) / 2, 0];
              ctx.drawImage(img, x, y, shorter, shorter, 0, 0, 512, 512);
              const croppedDataUrl = canvas.toDataURL("image/jpeg");
  
              resolve(croppedDataUrl);
            };
          });
        };
        
    
      
            window.onload = () => {
        // Load saved data into the form if it exists, but only set it, not bind any input events here
        const firstName = localStorage.getItem('firstName');
        const lastName = localStorage.getItem('lastName');
        const phoneNumber = localStorage.getItem('phoneNumber');

        const bio = localStorage.getItem('bio');
        const profilePicture = localStorage.getItem('profilePicture');
        
        if (firstName) {
            document.getElementById('first-name').value = firstName;
        }
        if (lastName) {
            document.getElementById('last-name').value = lastName;
        }
        if (phoneNumber) {
            document.getElementById('phone-number').value = phoneNumber;
        }
    
        if (bio) {
            document.getElementById('bio').value = bio;
        }
        

        if (profilePicture) {
            document.querySelector('.profile-pic').src = profilePicture;
        }
    };

    document.querySelector('.modal-body').insertAdjacentHTML('beforeend', `<input type="file" id="profile-pic-file" class="form-control" accept="image/*" />`);

    document.getElementById('profile-pic-file').addEventListener('change', (event) => {
        const file = event.target.files[0];
        const fileReader = new FileReader();
        fileReader.readAsDataURL(file);
        fileReader.onload = (input) => {
            resizeAndCropPic(input.target.result).then((cropped) => {
                // Temporarily display the cropped image in the UI, but don't save it yet
                document.querySelector('.profile-pic').src = cropped;
                // Store in a temporary global variable to save later
                window.tempProfilePic = cropped;
                closeModal();
            });
        };
    });


  
      </script>

      <script>
        var selectedInterests = JSON.parse(localStorage.getItem('selectedInterests')) || [];
        var interestsContainer = document.querySelector('.interests .tags');
        interestsContainer.innerHTML = '';
        selectedInterests.forEach(function(tagValue) {
            var tagSpan = document.createElement('span');
            tagSpan.textContent = tagValue;
            interestsContainer.appendChild(tagSpan);
        });
      </script>

      <script>
      var selectedLanguages = JSON.parse(localStorage.getItem('selectedLanguages')) || [];
      var languagesContainer = document.querySelector('.languages .tags');
      languagesContainer.innerHTML = '';
      selectedLanguages.forEach(function(tagValue) {
      var tagSpan = document.createElement('span');
      tagSpan.textContent = tagValue;
      languagesContainer.appendChild(tagSpan);
      });
      </script>

      <script>
      var selectedTravelStyle = JSON.parse(localStorage.getItem('selectedTravelStyle')) || [];
      var travelStyleContainer = document.querySelector('.travel-style .tags');
      travelStyleContainer.innerHTML = '';
      selectedTravelStyle.forEach(function(tagValue) {
      var tagSpan = document.createElement('span');
      tagSpan.textContent = tagValue;
      travelStyleContainer.appendChild(tagSpan);
      });
      </script>




       

      <script src="script.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    

      <!-- 
        NAVIGATION BAR LOGIC & STRUCTURE (If it makes sense)
       -->
      <!-- <nav>
        <a href="/na-current" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-airplane" viewBox="0 0 16 16">
          <path d="M6.428 1.151C6.708.591 7.213 0 8 0s1.292.592 1.572 1.151C9.861 1.73 10 2.431 10 3v3.691l5.17 2.585a1.5 1.5 0 0 1 .83 1.342V12a.5.5 0 0 1-.582.493l-5.507-.918-.375 2.253 1.318 1.318A.5.5 0 0 1 10.5 16h-5a.5.5 0 0 1-.354-.854l1.319-1.318-.376-2.253-5.507.918A.5.5 0 0 1 0 12v-1.382a1.5 1.5 0 0 1 .83-1.342L6 6.691V3c0-.568.14-1.271.428-1.849m.894.448C7.111 2.02 7 2.569 7 3v4a.5.5 0 0 1-.276.447l-5.448 2.724a.5.5 0 0 0-.276.447v.792l5.418-.903a.5.5 0 0 1 .575.41l.5 3a.5.5 0 0 1-.14.437L6.708 15h2.586l-.647-.646a.5.5 0 0 1-.14-.436l.5-3a.5.5 0 0 1 .576-.411L15 11.41v-.792a.5.5 0 0 0-.276-.447L9.276 7.447A.5.5 0 0 1 9 7V3c0-.432-.11-.979-.322-1.401C8.458 1.159 8.213 1 8 1s-.458.158-.678.599"/>
        </svg><br>Current Trip</a>
        <a href="/map" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-geo-alt" viewBox="0 0 16 16">
          <path d="M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A32 32 0 0 1 8 14.58a32 32 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10"/>
          <path d="M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4m0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
        </svg><br>Map</a>
        <a href="/na" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-globe-americas" viewBox="0 0 16 16">
          <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0M2.04 4.326c.325 1.329 2.532 2.54 3.717 3.19.48.263.793.434.743.484q-.121.12-.242.234c-.416.396-.787.749-.758 1.266.035.634.618.824 1.214 1.017.577.188 1.168.38 1.286.983.082.417-.075.988-.22 1.52-.215.782-.406 1.48.22 1.48 1.5-.5 3.798-3.186 4-5 .138-1.243-2-2-3.5-2.5-.478-.16-.755.081-.99.284-.172.15-.322.279-.51.216-.445-.148-2.5-2-1.5-2.5.78-.39.952-.171 1.227.182.078.099.163.208.273.318.609.304.662-.132.723-.633.039-.322.081-.671.277-.867.434-.434 1.265-.791 2.028-1.12.712-.306 1.365-.587 1.579-.88A7 7 0 1 1 2.04 4.327Z"/>
        </svg><br>Discover</a>
        <a href="/safety" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-file-medical" viewBox="0 0 16 16">
          <path d="M8.5 4.5a.5.5 0 0 0-1 0v.634l-.549-.317a.5.5 0 1 0-.5.866L7 6l-.549.317a.5.5 0 1 0 .5.866l.549-.317V7.5a.5.5 0 1 0 1 0v-.634l.549.317a.5.5 0 1 0 .5-.866L9 6l.549-.317a.5.5 0 1 0-.5-.866l-.549.317zM5.5 9a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1z"/>
          <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2zm10-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1"/>
        </svg><br>Safety</a>
        <a href="/dashboard" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
          <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"/>
        </svg><br>Dashboard</a>
      </nav>
      <script> // Script for dashboard indication on nav bar
        var currentPageUrl = window.location.href;
        var onDashboard = "http://localhost:8000/dashboard"
        // Get all nav links
        var navLinks = document.querySelectorAll('nav a');
        // Loop through each nav link
        navLinks.forEach(function(navLink) {
          // Check if the href attribute of the nav link matches the current page URL
          if (navLink.href === onDashboard) {
            navLink.classList.add('active');
          }
        });
      </script> -->
  </body>
 

</html>
